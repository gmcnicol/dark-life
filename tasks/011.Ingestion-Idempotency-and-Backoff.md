# Task 011 — Ingestion Idempotency & Backoff

Objective: Guarantee duplicate-free ingestion and polite Reddit access.

Implementation Steps
- [ ] DB unique index on (source, external_id).
- [ ] API: upsert-or-skip; clear status codes (201 created, 200 updated, 409 duplicate skipped).
- [ ] Persist per-subreddit checkpoints; configurable window; jittered polling.
- [ ] Backoff: adhere to Retry-After; exponential with jitter on 5xx/429.

Tests
- [ ] Re-ingest same window → no net new rows; counters reflect duplicates skipped.
- [ ] 429 simulation → backoff respected; no hammering.
- [ ] Crash/restart resumes from checkpoints.

Acceptance Criteria
- [ ] Ingestion is idempotent under repeated runs; polite to API limits.
