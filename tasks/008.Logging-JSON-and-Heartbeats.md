# Task 008 — Logging (JSON) & Heartbeats

Objective: Emit structured, unbuffered logs and periodic heartbeats during long renders.

Implementation Steps
- [ ] Use stdlib logging or structlog; JSON formatter; include fields: service, event, job_id, story_id, part_id, elapsed_ms.
- [ ] Set PYTHONUNBUFFERED=1; use python -u in compose command.
- [ ] Heartbeat: log every 5–10s during render; also POST heartbeat to API to extend lease.
- [ ] Mask secrets in logs (API_AUTH_TOKEN, ELEVENLABS_API_KEY).

Tests
- [ ] Unit: logger produces JSON line with required fields.
- [ ] Manual: run a long render; confirm heartbeat logs appear and lease is extended.
- [ ] CI: grep logs to ensure no secrets appear.

Acceptance Criteria
- [ ] All stages log; heartbeats present for long tasks; no secret leakage.
